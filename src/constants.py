import logging
logger = logging.getLogger(__name__)

# 和弦数据库
CHORD_DB = {
    "日式ACG": {
        "经典进行1": ["I", "V", "VI", "IV"],
        "伤感进行": ["VI(min)", "IV", "I", "V"],
        "王道进行": ["I", "III", "IV", "V"],
        "青春进行": ["IV", "V", "III", "VI"],
        "战斗进行": ["I", "VII", "VI", "V"],
        "悬疑进行": ["II(min)", "V", "I", "IV"]
    },
    "华语流行": {
        "卡农进行": ["I", "V", "VI", "III", "IV", "I", "IV", "V"],
        "4536": ["IV", "V", "III(min)", "VI(min)"],
        "1645": ["I", "VI(min)", "IV", "V"],
        "6345": ["VI(min)", "III(min)", "IV", "V"],
        "抒情进行": ["I", "III(min)", "IV", "V"],
        "经典副歌": ["IV", "I", "V", "VI(min)"]
    },
    "欧美流行": {
        "1564": ["I", "V", "VI(min)", "IV"],
        "流行摇滚": ["I", "V", "IV", "V"],
        "灵魂进行": ["I", "VI(min)", "II(min)", "V"],
        "放克律动": ["I", "VII", "IV", "V"],
        "R&B进行": ["II(min)", "V", "I", "IV"],
        "陷阱进行": ["I", "III", "VI(min)", "VII"]
    },
    "爵士": {
        "标准II-V-I": ["II(min7)", "V7", "I(maj7)"],
        "小调II-V-I": ["II(min7b5)", "V7(b9)", "I(min7)"],
        "爵士蓝调": ["I7", "IV7", "I7", "V7"],
        "模态爵士": ["I(maj7)", "IV(maj7)", "I(maj7)", "V7"],
        "比波普": ["II(min7)", "V7", "III(min7)", "VI7"]
    },
    "电子音乐": {
        "EDM主歌": ["I", "V", "VI(min)", "IV"],
        "浩室进行": ["I", "VII", "IV", "V"],
        "未来贝斯": ["VI(min)", "VII", "I", "III"],
        "陷阱进行": ["I", "III", "VI(min)", "VII"],
        "氛围铺底": ["I(sus4)", "IV(sus4)", "VI(min)", "II(min)"]
    },
    "摇滚": {
        "强力进行": ["I", "IV", "V", "IV"],
        "朋克进行": ["I", "V", "VI(min)", "V"],
        "金属进行": ["I", "VII", "IV", "V"],
        "布鲁斯12小节": ["I", "I", "I", "I", "IV", "IV", "I", "I", "V", "IV", "I", "V"],
        "另类摇滚": ["I", "III(min)", "IV", "V"]
    },
    "古典": {
        "终止式": ["IV", "V", "I"],
        "帕赫贝尔": ["I", "V", "VI(min)", "III", "IV", "I", "IV", "V"],
        "贝多芬动机": ["I", "VII", "I", "V"],
        "浪漫派进行": ["I", "VI(min)", "II(min)", "V"],
        "巴洛克": ["I", "IV", "V", "I"]
    },
    "民谣": {
        "乡村进行": ["I", "V", "VI(min)", "V"],
        "民谣终止": ["IV", "V", "I"],
        "叙事进行": ["I", "IV", "I", "V"],
        "凯尔特": ["I", "VII", "IV", "V"],
        "指弹进行": ["VI(min)", "II(min)", "V", "I"]
    }
}

# 音阶映射
SCALE_MAP = {
    'C': [0, 2, 4, 5, 7, 9, 11],  # C大调音阶
    'F': [5, 7, 9, 10, 0, 2, 4],   # F大调音阶
    'G': [7, 9, 11, 0, 2, 4, 6]    # G大调音阶
}

# 和弦类型
CHORD_TYPES = {
    # 三和弦
    'maj': [0, 4, 7],        # 大三和弦
    'min': [0, 3, 7],        # 小三和弦
    'dim': [0, 3, 6],        # 减三和弦
    'aug': [0, 4, 8],        # 增三和弦
    
    # 七和弦
    '7': [0, 4, 7, 10],      # 属七和弦
    'maj7': [0, 4, 7, 11],   # 大七和弦
    'm7': [0, 3, 7, 10],     # 小七和弦
    'min7': [0, 3, 7, 10],   # 小七和弦(别名)
    'dim7': [0, 3, 6, 9],    # 减七和弦
    'm7b5': [0, 3, 6, 10],   # 半减七和弦
    
    # 挂留和弦
    'sus2': [0, 2, 7],       # 挂二和弦
    'sus4': [0, 5, 7],       # 挂四和弦
    
    # 扩展和弦
    '9': [0, 4, 7, 10, 14],  # 属九和弦
    'maj9': [0, 4, 7, 11, 14], # 大九和弦
    'add9': [0, 4, 7, 14],   # 加九和弦
    '6': [0, 4, 7, 9],       # 六和弦
    'm6': [0, 3, 7, 9],      # 小六和弦
}

# 音符名称
NOTE_NAMES = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B']

# 罗马数字到音阶度数的映射
ROMAN_TO_DEGREE = {
    'I': 0, 'II': 1, 'III': 2, 'IV': 3, 
    'V': 4, 'VI': 5, 'VII': 6
}

# 和弦类型显示映射
CHORD_TYPE_DISPLAY = {
    'maj': '',
    'min': 'm',
    'dim': 'dim',
    'aug': 'aug',
    '7': '7',
    'maj7': 'maj7',
    'm7': 'm7',
    'min7': 'm7',
    'dim7': 'dim7',
    'm7b5': 'm7b5',
    'sus2': 'sus2',
    'sus4': 'sus4',
    '9': '9',
    'maj9': 'maj9',
    'add9': 'add9',
    '6': '6',
    'm6': 'm6'
}